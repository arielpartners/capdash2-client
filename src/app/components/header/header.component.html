<div id="header" class="flex-box-row navbar" ng-controller="headerController" (click)="menu.toggleDropdown($event)">
  <!-- begin mobile sidebar expand / collapse button -->
  <div>
    <a href="'http://intranet.dhs.nycnet:4444'" class="navbar-brand"><img src="assets/img/dss_logo_white_sm.png" alt="dhs_logo" width="190" height="33"></a>
    <button type="button" class="navbar-toggle" data-click="sidebar-toggled">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
  <!-- end mobile sidebar expand / collapse button -->

  <!-- begin navbar-collapse -->
  <!-- begin mega menu -->
  <div class="header-nav-left flex-box-row" id="top-navbar">
    <div class="dropdown" [ngClass]="headerMenu.main.container">
      <cd-menu-button [id]="headerMenu.main.menu.id" [name]="headerMenu.main.menu.name">
        <cd-icon [icon]="headerMenu.main.menu.icon"
                 fixed="true"></cd-icon>
        {{headerMenu.main.menu.label}}
        <b class="caret"></b>
      </cd-menu-button>
      <cd-menu [className]="headerMenu.main.menu.id"
               [triggerBy]="headerMenu.main.menu.id">
        <div class="row">
          <div *ngFor="let submenu of headerMenu.main.items"
               [ngClass]="submenu.container"
               [ngSwitch]="submenu.type">

            <cd-menu-header [icon]="submenu.header.icon" [text]="submenu.header.text"></cd-menu-header>

            <div class="row" *ngSwitchCase="'list'">
              <cd-list className="nav">
                <cd-list-item *ngFor="let item of submenu.items" [link]="item.href | safeUrl" >
                  <cd-icon [icon]="item.activeIcon ? item.activeIcon : 'angle-right'"
                           size="lg"
                           fixed="true"
                           cdTextInverse></cd-icon>
                  {{item.text}}
                  <cd-badge *ngIf="item.badge" [status]="item.badge.class" [value]="item.badge.value"></cd-badge>
                </cd-list-item>
              </cd-list>
            </div>

            <div *ngSwitchCase="'paragraph'">
              <p *ngFor="let item of submenu.items">
                {{item.text}}
              </p>
            </div>
          </div>
        </div>
      </cd-menu>
    </div>
    <div>
      <a href="#" class="text-white ng-binding"><i class="fa fa-envelope-o"></i> Contact DSS OIT</a>
    </div>
  </div>
  <!-- end navbar-collapse -->
  <!-- ./end mega menu -->

  <!-- begin header navigation right -->
  <div class="header-nav-right flex-box-row">
    <!-- begin header global search -->
    <div>
      <form class="navbar-form full-width ng-pristine ng-valid">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Global Enter keyword">
          <button type="submit" class="btn btn-search"><i class="fa fa-search"></i></button>
        </div>
      </form>
    </div>
    <!-- ./end header global search -->

    <div class="dropdown" [ngClass]="headerMenu.notification.container">
      <cd-menu-button [id]="headerMenu.notification.menu.id" [name]="headerMenu.notification.menu.name">
        <cd-icon  [icon]="headerMenu.notification.menu.icon"
                  class="f-s-14"></cd-icon>
        <span class="label">4</span>
      </cd-menu-button>
      <cd-menu [className]="headerMenu.notification.menu.id"
               class="pull-right animated fadeInDown"
               [triggerBy]="headerMenu.notification.menu.id">
        <li class="dropdown-header">Notification ({{headerMenu.notification.items.length}})</li>
        <!--<cd-menu-item className="dropdown-header">Notification (4)</cd-menu-item>-->
        <cd-menu-item className="media"
                      [link]="item.link | safeUrl"
                      *ngFor="let item of headerMenu.notification.items">
          <div class="media-left">
            <cd-icon *ngIf="!item.icon.thumbnail"
                     class="media-object" icon="warning" [color]="item.icon.background"></cd-icon>
            <img *ngIf="item.icon.thumbnail"
                 [src]="item.icon.thumbnail" class="media-object" alt="">
          </div>
          <div class="media-body">
            <h6 class="media-heading">{{item.text}}</h6>
            <div class="text-muted f-s-11">3 minutes ago</div>
          </div>
        </cd-menu-item>
        <!-- Todo: hover and focus is not same as original UI design -->
        <cd-menu-item className="dropdown-footer text-center" [link]="'javscript:' | safeUrl">View more</cd-menu-item>
      </cd-menu>
    </div>

    <!-- ngIf: setting.layout.pageLanguageBar === true -->
    <!-- Todo: ng-if="setting.layout.pageLanguageBar === true" -->
    <div class="dropdown" [ngClass]="headerMenu.language.container">
      <cd-menu-button [id]="headerMenu.language.menu.id" [name]="headerMenu.language.menu.name" class="f-s-14">
        <cd-icon [ngClass]="headerMenu.language.selected.icon"
                 [title]="headerMenu.language.selected.title"></cd-icon>
        <span class="name text-white">{{headerMenu.language.selected.text}}</span>
        <b class="caret text-white"></b>
      </cd-menu-button>
      <cd-menu [className]="headerMenu.language.menu.id"
               [triggerBy]="headerMenu.language.menu.id">
        <!-- Todo: what does this arrow class list item do? -->
        <li class="arrow"></li>
        <!-- Todo: when app setting is ready onClick function to menu item to change language setting -->
        <cd-menu-item *ngFor="let item of headerMenu.language.items">
          <cd-icon [ngClass]="item.icon" [title]="item.title"></cd-icon>
          {{item.text}}
        </cd-menu-item>
        <li class="divider m-b-0"></li>
        <li class="text-center"><a href="javascript:"><i class="fa fa-sliders"></i> More Options</a></li>
      </cd-menu>
    </div>

    <div class="dropdown" [ngClass]="headerMenu.user.container">
      <cd-menu-button [id]="headerMenu.user.menu.id" [name]="headerMenu.user.menu.name" className="flex-box-row f-s-14">
        <img [src]="(userProfile$ | async)" alt="user-rbs" width="128" height="128" *ngIf="userProfile$ | async">
        <span class="hidden-xs text-white">{{userName$ | async}}</span>
        <b class="caret text-white"></b>
      </cd-menu-button>
      <!-- Todo: make directive to handle animate features -->
      <cd-menu [className]="headerMenu.user.menu.id"
               [triggerBy]="headerMenu.user.menu.id">
        <!-- Todo: what does this arrow class list item do? -->
        <li class="arrow"></li>
        <cd-menu-item *ngFor="let item of headerMenu.user.items" [link]="item.link | safeUrl">
          <cd-icon [icon]="item.icon"></cd-icon>
          {{item.text}}
          <cd-badge *ngIf="item.badge"
                    [status]="item.badge.class"
                    [value]="item.badge.value"
                    right="true"></cd-badge>
        </cd-menu-item>
        <li class="divider"></li>
        <li>
          <!-- Directive for logout -->
          <a cdLogoutBtn cdCloseToggle
             [routerLink]="['login']"
             class="ng-binding logout">
            <i class="fa fa-sign-out"></i> Log Out of CapApp
          </a>
        </li>
      </cd-menu>
    </div>

  </div>
  <!-- end header navigation right -->
</div>
